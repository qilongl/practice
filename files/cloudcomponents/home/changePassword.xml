<?xml version="1.0" encoding="UTF-8"?>
<!--
            更改密码
            @version 1.0
            @author qilongl
            @date 2018/09/29
http://localhost:8888/easyComponentService?FunctionName=cloudcomponents-home-changePassword&info-userId=132&info-userName=lql&&gjzq_2017-11-16%2016:07:234_f7a92e88e8ae74c520427d73d5083fc3-->
<Function id="changePassword" datasource="dataSource" name="修改密码" desc="修改密码">
    <Parameters>
        <info islist="false">
            <userId/>
            <userName/>
        </info>
        <addParams islist="false">
            <oldPassword></oldPassword>
            <newPassWord></newPassWord>
        </addParams>
    </Parameters>
    <Actions>
        <update id="PassWordForUpdate" params="addParams" isreturn="true">
            <![CDATA[
                UPDATE Sys_User su SET su.PASSWORD = LOWER(utl_raw.cast_to_raw(DBMS_OBFUSCATION_TOOLKIT.MD5(input_string =>#{newPassWord}))),
                su.upD_psn =#{info.userId}
                WHERE  su.is_delete =0
                AND su.objid = #{info.userId}
                AND su.PASSWORD =LOWER(utl_raw.cast_to_raw(DBMS_OBFUSCATION_TOOLKIT.MD5(input_string =>#{oldPassword})))
            ]]>
        </update>
    </Actions>
</Function>